{
  "name": "pingpp",
  "version": "2.0.7",
  "description": "Pingplusplus API wrapper",
  "homepage": "https://github.com/PingPlusPlus/pingpp-nodejs",
  "author": {
    "name": "Pingpp",
    "email": "xufeng.weng@pingxx.com",
    "url": "https://pingxx.com/"
  },
  "contributors": [
    {
      "name": "Xufeng Weng",
      "email": "xufeng.weng@pingxx.com"
    }
  ],
  "repository": {
    "type": "git",
    "url": "git://github.com/PingPlusPlus/pingpp-nodejs.git"
  },
  "bugs:": "https://github.com/PingPlusPlus/pingpp-nodejs/issues",
  "engines": {
    "node": ">= v0.10.0"
  },
  "main": "lib/pingpp.js",
  "devDependencies": {
    "mocha": "~2.1.0",
    "chai": "~1.8.0",
    "chai-as-promised": "~4.0.0"
  },
  "dependencies": {
    "when": "~3.1.0",
    "qs": "^2.4.1",
    "lodash": "^3.1.0"
  },
  "scripts": {
    "test": "mocha"
  },
  "readme": "Pingpp Node.js SDK\n=================\n****\n\n## 简介\nlib 文件夹下是 Node.js SDK 文件，  \nexample 文件夹里面是一个简单的接入示例，该示例仅供参考。\n\n## 版本要求\nnodejs 版本 v0.8.0 及以上\n\n## 安装\n`npm install pingpp`  \n或者  \n下载源码后，在目录下运行 `npm install`\n\n### 初始化\n``` js\nvar pingpp = require('pingpp')('YOUR-KEY');\n```\n\n### 设置请求签名密钥\n密钥需要你自己生成，公钥请填写到 [Ping++ Dashboard](https://dashboard.pingxx.com)  \n设置你的私钥路径\n``` js\npingpp.setPrivateKeyPath(\"/path/to/your_rsa_private_key.pem\");\n```\n也可以设置私钥内容\n``` js\npingpp.setPrivateKey(\"你的 RSA 私钥内容字符串\");\n```\n\n### 支付\n``` js\npingpp.charges.create({\n  order_no:  \"123456789\",\n  app:       { id: \"APP_ID\" },\n  channel:   channel,\n  amount:    100,\n  client_ip: \"127.0.0.1\",\n  currency:  \"cny\",\n  subject:   \"Your Subject\",\n  body:      \"Your Body\",\n  extra:     extra\n}, function(err, charge) {\n  // YOUR CODE\n});\n```\n\n### 查询\n``` js\npingpp.charges.retrieve(\n  \"CHARGE_ID\",\n  function(err, charge) {\n    // YOUR CODE\n  }\n);\n```\n``` js\npingpp.charges.list(\n  { limit: 5 },\n  function(err, charges) {\n    // YOUR CODE\n  }\n);\n```\n\n### 退款\n``` js\npingpp.charges.createRefund(\n  \"CHARGE_ID\",\n  { amount: 100, description: \"Refund Description\" },\n  function(err, refund) {\n    // YOUR CODE\n  }\n);\n```\n\n### 退款查询\n``` js\npingpp.charges.retrieveRefund(\n  \"CHARGE_ID\",\n  \"REFUND_ID\",\n  function(err, refund) {\n    // YOUR CODE\n  }\n);\n```\n``` js\npingpp.charges.listRefunds(\n  \"CHARGE_ID\",\n  { limit: 5 },\n  function(err, refunds) {\n    // YOUR CODE\n  }\n);\n```\n\n### 红包\n``` js\npingpp.redEnvelopes.create({\n  order_no:    \"123456789\",\n  app:         { id: \"APP_ID\" },\n  channel:     \"wx_pub\",\n  amount:      100,\n  currency:    \"cny\",\n  subject:     \"Your Subject\",\n  body:        \"Your Body\",\n  extra: {\n    nick_name: \"Nick Name\",\n    send_name: \"Send Name\"\n  },\n  recipient:   \"Openid\",\n  description: \"Your Description\"\n}, function(err, redEnvelope) {\n  // YOUR CODE\n});\n```\n\n### 微信公众号获取签名\n如果使用微信 JS-SDK 来调起支付，需要在创建 `charge` 后，获取签名（`signature`），传给 HTML5 SDK。\n``` js\npingpp.wxPubOauth.getJsapiTicket(wx_app_id, wx_app_secret, function(e, response){\n  var ticket = response['ticket'];\n});\n```\n**正常情况下，`jsapi_ticket` 的有效期为 7200 秒。由于获取 `jsapi_ticket` 的 api 调用次数非常有限，频繁刷新 `jsapi_ticket` 会导致 api 调用受限，影响自身业务，开发者必须在自己的服务器全局缓存 `jsapi_ticket`。**\n\n_下面方法中 `url` 是当前网页的 URL，不包含`#`及其后面部分_\n``` js\nvar signature = pingpp.wxPubOauth.getSignature(charge, ticket, url);\n```\n然后在 HTML5 SDK 里调用\n``` js\npingpp.createPayment(charge, callback, signature, false);\n```\n\n### Event 事件\n``` js\npingpp.events.retrieve(\n  \"EVENT_ID\",\n  function(err, event) {\n    // YOUR CODE\n  }\n);\n```\n``` js\npingpp.events.list(\n  { limit: 5 },\n  function(err, events) {\n    // YOUR CODE\n  }\n);\n```\n\n### 企业付款\n``` js\npingpp.transfers.create({\n  order_no:    \"123456789\",\n  app:         { id: \"APP_ID\" },\n  channel:     \"wx_pub\",\n  amount:      100,\n  currency:    \"cny\",\n  type:        \"b2c\",\n  recipient:   \"Openid\",\n  description: \"Your Description\"\n}, function(err, transfer) {\n  // YOUR CODE\n});\n```\n### 企业付款查询\n``` js\npingpp.transfers.retrieve(\n  \"TRANSFER_ID\",\n  function(err, transfer) {\n    // YOUR CODE\n  }\n);\n```\n``` js\npingpp.transfers.list(\n  { limit: 5 },\n  function(err, transfers) {\n    // YOUR CODE\n  }\n);\n```\n\n**详细信息请参考 [API 文档](https://pingxx.com/document/api?node.js)。**\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/PingPlusPlus/pingpp-nodejs/issues"
  },
  "_id": "pingpp@2.0.7",
  "_from": "pingpp@"
}
